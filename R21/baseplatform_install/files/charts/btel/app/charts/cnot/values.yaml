global:
  registry: csf-docker-delivered.repo.lab.pl.alcatel-lucent.com
  #configMapOverrideName: my-cnot-configmap-conf
  #templateOverrideName: my-cnot-configmap-templates
  #cnotOutboundTrustCertsName: my-cnot-configmap-trustcerts
  #podNamePrefix: podpref
  #containerNamePrefix: contpref
  
  # Istio version in X.Y format e.g. 1.4/1.5
  istioVersion: 1.4

istio:
  # Enable automatic istio-proxy sidecar injection
  enabled: false
  # Enable istio gateway and virtual service
  gateway: true
  # Add NET_ADMIN and NET_RAW to container capabilities (required if no Istio CNI is present; only applies if PSP is being generated by the chart.)
  legacyCapabilities: true
  # DestinationRule enabled/disabled
  destinationRule: true
  # If set to true both plain text and mTLS communication is allowed. Otherwise STRICT mTLS policy is applied.
  permissive: false
  
# Set rbac/enabled field to true to use the default CSF RBAC
rbac:
  enabled: true

# To use external RBAC config set serviceAccountName and switch rbac.enabled=false. Role and RoleBinding also need to be provided when using an external serviceAccount.
serviceAccountName: 

configmapReload:
  image:
    imageRepo: cnot/configmap-reload
    imageTag: 1.2.2-151
    imagePullPolicy: IfNotPresent
  extraArgs: {}
  resources:
    limits:
      cpu: 10m
      memory: 32Mi
    requests:
      cpu: 10m
      memory: 32Mi

wildfly:
  https:
    enabled: true
    cert: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNzRENDQVpnQ0NRRFQ1ZVM5UnFyR3ZEQU5CZ2txaGtpRzl3MEJBUXNGQURBT01Rd3dDZ1lEVlFRRERBTkQKVTBZd0hoY05NVGt3TVRJMU1ETTFNalUyV2hjTk1qRXhNREl4TURNMU1qVTJXakFtTVNRd0lnWURWUVFEREJzcQpMbVJsWm1GMWJIUXVjM1pqTG1Oc2RYTjBaWEl1Ykc5allXd3dnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCCkR3QXdnZ0VLQW9JQkFRQ2J0YlR5R2kvaHBVV1dGNEFHSTIxWnJnSWFtUU1lZi9CQ0ZIemliamUzSnhTTG1Qa1MKRXRlME1STjJKUDM5NStEZXhSL0RkSmJZRnFzSUZYbzIwcU5MWXd2a3poaGxMYXBiZU9XWCtPZ1ZVUHl3cHd1NAoza1RodVZkOGVDNVY3STh4eUxUYnVIVnBheXJpYnZ1bGJsVlBRNnVwNzRkQ2R0NXZDN0pHbFlPcGgveUhNRnJxCk52QnFwWVg2Y1RVVFc5REZQM3pNY2N2SXlqK2VYR2x2WG5CUzUzOHdQbEc2SHYxbVRTNGZMcFFjTVdXdDBkNFEKcGx4YTFmL0RFdVF2by9mVFVQUFEwUnA5SzF1ZVJkQVBSeGh1cjNlL29wWStnQTdndzFnLy9ZY05ITWdGd0E3NApNYnhlbTBEZmY2dkdORklJbUVzZ2ZpbnA5VWRMWnZ6bUU4eWRBZ01CQUFFd0RRWUpLb1pJaHZjTkFRRUxCUUFECmdnRUJBSTZDc3luWThJS2FuY3k5dnVOdXptVnU1UkF0NitRWXlRTVdaZ1REVEJ5WnQ1bjlxaGEvU2toK0svTWIKQnpzVlFEMVJUSVR5ckcrMmg4Ym9Pb2h2ZVRiVUpxRUdjcjZxSThMQm1yMzEyeE5mTWV5dyt1NW5FbkF0YjBUaAp5dUNJTFdrTGZDSGNnM3JQd0UwV1llQmgzMml5WDFhTitrZ1ExUzJNZXlyc1VpWmd3bG1DMnVwaGdhYm1EMGp1CnRJLzExZjhHdk13Y0pxaUUxOUNlZ2d0OFJBZGNZZXFGUzM4RUNTZzVUTXNzRE80aWI3RTZDS0txV2VKNzAwOTYKTEFsWm52QVpaUXkzUjdoSWlzcmxMQTVkdldaM0VzbzRmUFU1RkpxVGtKcCtGYzZPVEYwRnpLUVl2T3lxMjVwVgpWZzk0amZabS9lWmU0NjR1cmV4NjdEemY4Rm89Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM3ekNDQWRlZ0F3SUJBZ0lKQUxLV2dyWnRqc2xpTUEwR0NTcUdTSWIzRFFFQkN3VUFNQTR4RERBS0JnTlYKQkFNTUEwTlRSakFlRncweE9UQXhNalV3TXpVeU5UWmFGdzAwTmpBMk1USXdNelV5TlRaYU1BNHhEREFLQmdOVgpCQU1NQTBOVFJqQ0NBU0l3RFFZSktvWklodmNOQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQU1GeEVBMEQyZXpBCm5SK3gwWU1jRFNmVUlKU0l3aS9SbWYxcWtjUVVDZm9rWFNuVWVnL0o0TXErRElyZEpQcXRLSVdFT0hMVmdUZUEKTFRxdjRkaHJ5V0lvRVNhY0U1YVN6VzhRRFRubUlrNEMyamZHeVZubTlzK1pleEMvUXZ4eGNHUldhSVl5Nm1kWAo0dVArbWNVWXJxUm1yUnhZUzQwek53Z3ZqcnRUZ3ovM1VVMk9XSENpU3M2RVJueTM4UVhLeWFVSEUrT2RXeWIwCkI5azViVzl2OERCZENwS1RCaGhjeFMwWndDN1o0TVFZQ0RqNUJiRGZzWldxbzdvTU5NUEJsd1FvUzg3WUpqZ0QKOXh2RmFiWkE1K0prZW4xdnNpNkNRV3VPSXplSTZNNkVVUUp2T21mcFFzUWlHRHg4eS9FSFM1cEYvS1JtMVZ6agp5L1Y2emp2YWk4RUNBd0VBQWFOUU1FNHdIUVlEVlIwT0JCWUVGREc1UmZyNk1iUXFYUFl6VkN1RzdrU0pLMUp4Ck1COEdBMVVkSXdRWU1CYUFGREc1UmZyNk1iUXFYUFl6VkN1RzdrU0pLMUp4TUF3R0ExVWRFd1FGTUFNQkFmOHcKRFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUJ2VHhYUGFBRmV1UzNvdzI1ZTJ4UzlpM21pcnl3WmtGY1dxcW1nYQpKV2pvejNydnQ3VWhZNFNJb2NFN1ZnandLYWNhY1pPQTc2eTRsTXJsUDV1RVZDTUNTNTdiZ3Jrdks5OXl0WmQrCmZJMDVzTVo0TEhkWlRBQVBybjJ2QzJSUjk1Z0tKbURUTXdnaCszWTFQRUtyTExyWi81VHlZK0R0c2dMM3gwaHYKVW9SaW1jT1QyTWMrQUlLd1YxSEsyM21WMzlwZFhwQWxPUnhhNVNnWGtBZWh5TUVqaUNSYk9mZXc4VEFwL0s1TQpQWmplSzF0eko3QXNCQzJjTDBKWXJ0cjdEMFZtVGh2Rmp2bGNJS1U4Z0xHeE5IUkU3ZXNSRk9kSUVFdUF1OUlKClU3d3MrbXJpK3RwQUhHdjBTSktwaEpVNkU5bjJ4V3p2Y1pUcnpoeWxFTVUyTFFBPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0t
    key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBbTdXMDhob3Y0YVZGbGhlQUJpTnRXYTRDR3BrREhuL3dRaFI4NG00M3R5Y1VpNWo1CkVoTFh0REVUZGlUOS9lZmczc1VmdzNTVzJCYXJDQlY2TnRLalMyTUw1TTRZWlMycVczamxsL2pvRlZEOHNLY0wKdU41RTRibFhmSGd1VmV5UE1jaTAyN2gxYVdzcTRtNzdwVzVWVDBPcnFlK0hRbmJlYnd1eVJwV0RxWWY4aHpCYQo2amJ3YXFXRituRTFFMXZReFQ5OHpISEx5TW8vbmx4cGIxNXdVdWQvTUQ1UnVoNzlaazB1SHk2VUhERmxyZEhlCkVLWmNXdFgvd3hMa0w2UDMwMUR6ME5FYWZTdGJua1hRRDBjWWJxOTN2NktXUG9BTzRNTllQLzJIRFJ6SUJjQU8KK0RHOFhwdEEzMytyeGpSU0NKaExJSDRwNmZWSFMyYjg1aFBNblFJREFRQUJBb0lCQUgwS0NlaHhCd3BZd2V5cApxbkZEZWNpT1o3b2NMZGtNUEUrVVRFVTQ1Uno3RVJDWkkwcFVQMHZBTFRTdXVCaHhZSzhEOVdIcitrWkV6Y3VNCkU3eDZvZzhqMXFWQ3EyeDBvMTBaVktZWmg2VzJoM1VFYi9GZzdFZW5vbzJkcFBmekkzcURCbGw3WXkzb2xXT0kKWkNTUTJZanhlcVRZYVBJQ3F0VFp1NnZhM1FRQm92Y1NSVmVBWGdtWWVqV243M0ZYSGw0ekNYa2JwQUZGbkptWgpOTUM5ODFQNVBXRWJpcXh5djNtTytBQmRCMEF5U1d0WDVQYzIxM1ZKRFZCRmp5Z3NTVFJFZk9MNzE3N0N6WXZvCjlDVU9uUDhDaUZ4T2pnbGdkZ0U5NjFmVWJOdjBCMkRmTjgxUXRTR2lJbUdicWV6RHR0VU12WkhZRFFFQmpsNGIKR0JNQ2l6RUNnWUVBenUyS256WW02YjlHc1NBMncybUo4aVhBdzNXRjZoRnZFSEhNYXNaN1NjQ3NsUmdhQkdDKwp1UHc2UjhidDR3WlVqYXZJRXgwL091ckxDeld3WG9MQ21oZ2srdVdEWWhKa1FFMHFES1AzcjZ0ZU9CT1ZOc3ZCCmYyMTIrc0RKVzZVZ0lnczUwZVVNUGNuKzlFTzFhVS9xc25FYnFnNVdIUFcrSDhHRHY5a3hONXNDZ1lFQXdLSy8KVmtoK2hFYStqL3VNV3A2aml3d2pTNjFuWHpZbTFjQ0cwYVU4VXIvYTA5elUxdW1XT1FmRGQ2ZkFGS2w2Vjh1MAovd3Jaa01xVFFybXgxVDlSb05FNlozQjNTWk5WZVhVbWxOUWRCalFuRm5lVXc5UXhwMGIralhOZjl2S0p4b3U0CnhCWW83UzhhOG1mWk9YMTZsSHBYZ3VaRnRZdnBaL0dxZUlwa1BDY0NnWUJ2dk91Vzc0bnh2Tnp5ZHArN3c3aSsKcms0NS9iTXpZdmlqVzUvenBId2NwbE5MS3ptWlZaaUhrWVB6RUdPU3JPOXBsUEkwQ0I0RnRaV3cxdXdIRFBzQwpkTGs3VmtZczVodUdjV1NjY01vbDdSYXlsemlDMzJIOGFtTE9JdDVZZzRFbmdRSlc2aVZERkZsOUV6Ylp5RkxHCnlyY1NqQzFKOUJVWFZzckxCUUJEc3dLQmdRQ3RrdmV0RzIxRWF5cFNPbXJoVElnNFJodVhtUXZIOHRkVFMwTXYKckIrS3dHekE4ZjZtRjV2UWozcEZXdFhzeURrQTJ3Q2Z2bnNEeUVTZ253bnFDRC9aRkMzMy9wSzlyUkFiZkwvaQo0cTIwWlZIRElNVGZIMWdPVGg0WC9wbTl2aFQrM2U4Q1lLVkg4bVhwZmtGeFYrc1gxcFQ3MGRtR0dDZWNEVmw1CmU5bU5pUUtCZ0RycjkzSmIwd1ZtL3hWekdwa20wS3pheG5ZbXRCTnZyZVM3S2YzeW1PcGxqd3hPeno4R2dQV1QKRWhMZkN2ODFsaXYyeXhJLzdDTERMaUhxZkcwd1pEbGZvUk4wNDNLdlY4RjBQajRPczZQM0lydkh2enBtdVRrdQo1UFVVWUhtQkNkTDlaRDBzMnRheklmemExd1hGR2F4M1BDaE9wbFQxbkJQQXoxdWNoTkpLCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0t
    applikeystorepass: dGVzdDEyMzQ=
    vaultpass: dGVzdDEyMzQ=
  authByKeycloak:
    enabled: false
    keycloakserver: localhost:8443
    notifServer:
      realm: CNOT
      authServerUrl: https://localhost:8443/auth
      sslRequired: external
      resource: notif-server
      publicClient: false
      credential:
        secret: c53be586-8cb3-4979-b760-94703d3c05e6
  ipv6Enabled: false

cnot:
  name: cnot

  ingress:
    enabled: true
    annotations:
      nginx.ingress.kubernetes.io/rewrite-target: /
      nginx.ingress.kubernetes.io/ssl-redirect: "true"
      ingress.citm.nokia.com/sticky-route-services: $cookie_JSESSIONID|JSESSIONID ip_cookie
      nginx.ingress.kubernetes.io/ssl-passthrough: "true"
      nginx.ingress.kubernetes.io/secure-backends: "true"
    labels: {}
    path: /cnot
    hosts:
      - ""
    tls: []

  image:
    imageRepo: cnot/server/cnot
    imageTag: 1.5.4-1821
    imagePullPolicy: IfNotPresent

  prefixURL: ""
  baseURL: ""
  enableAdminApi: false

  extraArgs: {}
  extraHostPathMounts: []
  extraConfigmapMounts: []
  extraSecretMounts: []
  extraEnv:

  replicaCount: 1

  resources:
    limits:
      cpu: 2
      memory: 4Gi
    requests:
      cpu: 500m
      memory: 512Mi

  service:
    annotations:
      prometheus.io/scrape: "true"
    labels: {}
    clusterIP: ""

    externalIPs: []

    loadBalancerIP: ""
    loadBalancerSourceRanges: []
    servicePort: 80
    servicePortHTTPS: 443
    type: ClusterIP

  terminationGracePeriodSeconds: 300

  nodeSelector: {}
  tolerations: []

cnot-configmap:
  cnotFiles:
    app_conf.yaml:
      CHANNELS:
        ALARM:
          servers:
            - id: AlarmServer
          default: AlarmServer
        EMAIL:
          servers:
            - id: SMTPServer1
              host: localhost
          default: SMTPServer1
      TRIGGERS:
        - id: TriggerForCPRO
          condition:
            body: $.alerts[?(@.labels.source == 'CPRO')]
          action:
            type: accept
            profile: ProfileForCPRO
        - id: TriggerForCALM
          condition:
            body: $.alerts[?(@.labels.source == 'CALM')]
          action:
            type: accept
            profile: ProfileForCALM
      PROFILES:
        - id: ProfileForCPRO
          channels:
            - type: ALARM
              content:
                - filter:
                    location: $.alerts[*]
                  transform:
                    alarmId:
                      selected: $.labels.id
                      required: true
                    alarmName:
                      selected: $.labels.name
                      required: true
                    alarmSeverity:
                      selected: $[?(@.status == 'firing')].labels.severity
                      default: CLEARED
                    alarmKey:
                      selected: $.labels.key
                      default: ''
                    alarmTask:
                      default: NOTIFY
                    alarmText:
                      selected: $.labels.text
                      required: true
                    alarmEventType:
                      selected: $.labels.eventType
                      required: true
                    alarmProbableCause:
                      selected: $.labels.probableCause
                      required: true
                    alarmData:
                      selected: $.annotations.description
                    time:
                      selected: $.startsAt
                    host:
                      selected: $.labels.host
                    system:
                      selected: $.labels.system
                    systemId:
                      selected: $.labels.systemid
                    extension.source:
                      selected: $.labels.source
                    extension.Enterprise:
                      selected: $.labels.namespace
        - id: ProfileForCALM
          channels:
            - type: EMAIL
              content:
                - filter:
                    location: $.alerts[*]
                  transform:
                    subject:
                      default: AlarmNotice
                    text:
                      template: EmailTemplate1
                      variables:
                        alarmId:
                          selected: $.labels.id
                          required: true
                        alarmName:
                          selected: $.labels.name
                          required: true
                        alarmTask:
                          selected: $.labels.task
                          required: true
                        alarmSeverity:
                          selected: $.labels.severity
                          required: true
                        alarmKey:
                          selected: $.labels.key
                        alarmText:
                          selected: $.labels.text
                          required: true
                        alarmEventType:
                          selected: $.labels.eventType
                          required: true
                        alarmProbableCause:
                          selected: $.labels.probableCause
                          required: true
                        alarmData:
                          selected: $.annotations.description
                        time:
                          selected: $.time
                        timeZone:
                          selected: $.timezone
                        process:
                          selected: $.process
                        service:
                          selected: $.service
                        container:
                          selected: $.container
                        host:
                          selected: $.host
                        system:
                          selected: $.system
                        systemId:
                          selected: $.systemid
                        source:
                          selected: $.labels.source
                        namespace:
                          selected: $.labels.namespace
                    from:
                      default: someone@nokia.com
                    sendAsHtml:
                      default: false
                    to:
                      default: to1@nokia.com
      TEMPLATES:
        - id: EmailTemplate1
          file: EmailTemplate1.ftl

    app_conf_internal.properties: |
      DEFAULT_TRIGGER_HANDLER_TYPE = SIMPLE
      DEFAULT_PROFILE_HANDLER_TYPE = SIMPLE
      DEFAULT_SCHEDULE_EXECUTOR_POOL_SIZE = 200
      TEMPLATE_BASE_PATH = /usr/local/cnot/etc/templates/

  cnotTemplates:
    EmailTemplate1.ftl: |
      <#compress>
      Alarm Info:
      AlarmId = ${alarmId}
      AlarmName = ${alarmName}
      AlarmTask = ${alarmTask}
      AlarmSeverity = ${alarmSeverity}
      <#if alarmKey ??>AlarmKey = ${alarmKey}</#if>
      AlarmText = ${alarmText}
      AlarmEventType = ${alarmEventType}
      AlarmProbableCause = ${alarmProbableCause}
      <#if alarmData ??>AlarmData = ${alarmData}</#if>
      <#if service ??>Service = ${service}</#if>
      <#if host ??>Host = ${host}</#if>
      <#if system ??>System = ${system}</#if>
      <#if systemId ??>SystemId = ${systemId}</#if>
      <#if source ??>Source = ${source}</#if>
      <#if namespace ??>NameSpace = ${namespace}</#if>
      <#if time ??>Time = ${time}<#if timeZone ??>${timeZone}</#if></#if>
      </#compress>

  cnotOutboundTrustCerts:
    EMAIL_SMTPServer1.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM3ekNDQWRlZ0F3SUJBZ0lKQUxLV2dyWnRqc2xpTUEwR0NTcUdTSWIzRFFFQkN3VUFNQTR4RERBS0JnTlYKQkFNTUEwTlRSakFlRncweE9UQXhNalV3TXpVeU5UWmFGdzAwTmpBMk1USXdNelV5TlRaYU1BNHhEREFLQmdOVgpCQU1NQTBOVFJqQ0NBU0l3RFFZSktvWklodmNOQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQU1GeEVBMEQyZXpBCm5SK3gwWU1jRFNmVUlKU0l3aS9SbWYxcWtjUVVDZm9rWFNuVWVnL0o0TXErRElyZEpQcXRLSVdFT0hMVmdUZUEKTFRxdjRkaHJ5V0lvRVNhY0U1YVN6VzhRRFRubUlrNEMyamZHeVZubTlzK1pleEMvUXZ4eGNHUldhSVl5Nm1kWAo0dVArbWNVWXJxUm1yUnhZUzQwek53Z3ZqcnRUZ3ovM1VVMk9XSENpU3M2RVJueTM4UVhLeWFVSEUrT2RXeWIwCkI5azViVzl2OERCZENwS1RCaGhjeFMwWndDN1o0TVFZQ0RqNUJiRGZzWldxbzdvTU5NUEJsd1FvUzg3WUpqZ0QKOXh2RmFiWkE1K0prZW4xdnNpNkNRV3VPSXplSTZNNkVVUUp2T21mcFFzUWlHRHg4eS9FSFM1cEYvS1JtMVZ6agp5L1Y2emp2YWk4RUNBd0VBQWFOUU1FNHdIUVlEVlIwT0JCWUVGREc1UmZyNk1iUXFYUFl6VkN1RzdrU0pLMUp4Ck1COEdBMVVkSXdRWU1CYUFGREc1UmZyNk1iUXFYUFl6VkN1RzdrU0pLMUp4TUF3R0ExVWRFd1FGTUFNQkFmOHcKRFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUJ2VHhYUGFBRmV1UzNvdzI1ZTJ4UzlpM21pcnl3WmtGY1dxcW1nYQpKV2pvejNydnQ3VWhZNFNJb2NFN1ZnandLYWNhY1pPQTc2eTRsTXJsUDV1RVZDTUNTNTdiZ3Jrdks5OXl0WmQrCmZJMDVzTVo0TEhkWlRBQVBybjJ2QzJSUjk1Z0tKbURUTXdnaCszWTFQRUtyTExyWi81VHlZK0R0c2dMM3gwaHYKVW9SaW1jT1QyTWMrQUlLd1YxSEsyM21WMzlwZFhwQWxPUnhhNVNnWGtBZWh5TUVqaUNSYk9mZXc4VEFwL0s1TQpQWmplSzF0eko3QXNCQzJjTDBKWXJ0cjdEMFZtVGh2Rmp2bGNJS1U4Z0xHeE5IUkU3ZXNSRk9kSUVFdUF1OUlKClU3d3MrbXJpK3RwQUhHdjBTSktwaEpVNkU5bjJ4V3p2Y1pUcnpoeWxFTVUyTFFBPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0t

