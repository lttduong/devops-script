<?xml version="1.0" encoding="UTF-8" ?>
<configuration scan="true">
   <jmxConfigurator/>
   <turboFilter class="ch.qos.logback.classic.turbo.MarkerFilter">
      <Marker>GET</Marker>
      <OnMatch>DENY</OnMatch>
      <OnMismatch>NEUTRAL</OnMismatch>
   </turboFilter>

   <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
      <encoder>
         <pattern>%d [ALMA|-|-|%replace(%thread){' ',
            '-'}|%level|%logger{36}] %msg %exception %n
         </pattern>
      </encoder>
   </appender>

   <appender name="SYSLOG" class="ch.qos.logback.classic.net.SyslogAppender">
      <syslogHost>localhost</syslogHost>
      <facility>USER</facility>
      <suffixPattern>[ALMA|%replace(%thread){' ', '-'}|%level|%logger{36}] %msg %exception</suffixPattern>
      <throwableExcluded>true</throwableExcluded>
   </appender>

   <appender name="LOGFILE"
             class="ch.qos.logback.core.rolling.RollingFileAppender">
      <file>${alma.log.dir}/alma.log</file>
      <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
         <fileNamePattern>${alma.log.dir}/alma.%i.log</fileNamePattern>
         <minIndex>1</minIndex>
         <maxIndex>10</maxIndex>
      </rollingPolicy>
      <triggeringPolicy
              class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
         <maxFileSize>10MB</maxFileSize>
      </triggeringPolicy>
      <encoder>
         <pattern>%d [ALMA|-|-|%replace(%thread){'
            ','-'}|%level|%logger{36}] %msg %exception %n
         </pattern>
      </encoder>
   </appender>

   <appender name="DROPPEDALARM"
             class="ch.qos.logback.core.rolling.RollingFileAppender">
      <file>${alma.log.dir}/alarms.log</file>
      <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
         <fileNamePattern>${alma.log.dir}/alarms.%i.log</fileNamePattern>
         <minIndex>1</minIndex>
         <maxIndex>10</maxIndex>
      </rollingPolicy>
      <triggeringPolicy
              class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
         <maxFileSize>10MB</maxFileSize>
      </triggeringPolicy>
      <encoder>
         <pattern>%d %msg %exception %n</pattern>
      </encoder>
   </appender>

   <appender name="ARCHIVEDALARM"
             class="ch.qos.logback.core.rolling.RollingFileAppender">
      <file>${alma.log.dir}/history.log</file>
      <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
         <fileNamePattern>${alma.log.dir}/history.%i.log</fileNamePattern>
         <minIndex>1</minIndex>
         <maxIndex>10</maxIndex>
      </rollingPolicy>
      <triggeringPolicy
              class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
         <maxFileSize>10MB</maxFileSize>
      </triggeringPolicy>
      <encoder>
         <pattern>%d %msg %exception %n</pattern>
      </encoder>
   </appender>

   <root level="{{ .Values.logLevel }}">
      <appender-ref ref="LOGFILE"/>
      <appender-ref ref="STDOUT"/>
   </root>

   <logger name="com.nokia.csf.calm.persistence.DroppedAlarmLogger" level="INFO"
           additivity="false">
      <appender-ref ref="DROPPEDALARM"/>
   </logger>
   <logger name="ArchivedAlarmLogger" level="INFO"
           additivity="false">
      <appender-ref ref="ARCHIVEDALARM"/>
   </logger>
   <logger name="org.snmp4j.agent.mo.snmp.NotificationOriginatorImpl" level="OFF"/>
</configuration>
