## ref: https://confluence.app.alcatel-lucent.com/display/plateng/HELM+Application+Deployment+-+LIFECYCLE#HELMApplicationDeployment-LIFECYCLE-RelocatableChart
### global registry
global:
  # This registry is used for elasticsearch-curator image
  registry: csf-docker-delivered.repo.lab.pl.alcatel-lucent.com
  # This registry is used for kubectl image
  registry1: csf-docker-delivered.repo.lab.pl.alcatel-lucent.com
  seccompAllowedProfileNames: docker/default
  seccompDefaultProfileName: docker/default

  #you can add prefixes to pod and container names by providing values for below parameters
  #Provide lowercase alphanumeric characters, '-' or '.'
  #Consider suffixing the podNamePrefix and containerNamePrefix with either . or - for convenience
  podNamePrefix:
  containerNamePrefix:

  #If rbac.enabled is set to false, then it is mandatory to provide precreated Service account either at global level or at individual chart level.
  rbac:
    enabled: true
  #User can specify the precreated global SA here
  serviceAccountName: ""

customResourceNames:
  #Provide lowercase alphanumeric characters, '-' or '.'
  resourceNameLimit: 63
  curatorCronJobPod:
    #when curatorContainerName is not provided,<containerprefix>-curator would be used by default.
    curatorContainerName: ""
  #If job/container names are not provided, then default names would be generated by the chart in following format:
  #For job name: <podprefix>-<ReleaseName>-<string related to job>
  #For job containernames: <containerprefix>-<string related to job>
  deleteJob:
    name: ""
    deleteJobContainerName: ""

#This section allows to configure user defined name for pods and containers(For container this will take effect only when customResourceName is not provided for container)
#Options include:
#nameOverride: fullname would become <ReleaseName>-<nameOverride>
#fullnameOverride: fullname would become fullnameOverride
#If specified both, fullnameOverride would take the precedence.
nameOverride:
fullnameOverride:

curator:
  image: 
    #please update the below repo to elk_c if you wish to use curator centos8 based image. default is centos7 image.
    repo: elk_c_cos7
    tag: 5.8.1-20.09.0
  ImagePullPolicy: "IfNotPresent"
  resources:
    limits:
      cpu: "120m"
      memory: "120Mi"
    requests:
      cpu: "100m"
      memory: "100Mi"

  #User can configure the precreated SA specifically for this chart here. SA specified here takes precedence over the SA specified in global.
  #If precreated SA is not provided at global and individual chart level and rbac.enabled is set to true, then rbac objects will be created by the chart.
  serviceAccountName: ""

  securityContext:
    # Curator chart will run with UID:1000
    # fsGroup is the gid that is assigned for the volumemounts mounted to the pod(fsGroup ID is used for block storage)
    fsGroup: 1000
    # The supplementalGroups ID applies to shared storage volumes. Uncomment below line to set supplemetary group.
    #supplementalGroups: [1000]
    # Uncomment below lines lines to configure SELinux label to a container.
    # For more details refer to https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
    #seLinuxOptions:
    #  level: "s0:c223,c111"

  # Uncomment below lines to configure curator specific annotations. Use 6 space indentation
  #custom:
    #annotations:
 
 #To configure cutomized labels to pods. Uncomment the below line and give labels after 4 space indentation
 #podLabels:
   #resourcetype: pod

  enabled: true
  schedule: "0 1 * * *"
  ## Uncomment following section to modify cronjob spec parameters. Examples have been given.
  ## Parameters of the same hierarchy should be added. Do not add parameters with nested hierarchy. 
  #jobSpec:
  #  successfulJobsHistoryLimit: 5
  #  failedJobsHistoryLimit: 3
  #  concurrencyPolicy: Allow
  ## Uncomment following section to modify cronjob template spec parameters. Examples have been given.
  ## Parameters of the same hierarchy should be added. Do not add parameters with nested hierarchy.
  #jobTemplateSpec:
  #  backoffLimit: 3
  #  activeDeadlineSeconds: 30
  configMaps:
    #Please configure preCreatedConfigmap if you want to use existing configmap for curator. The configmap must contain the files actions.yml, curator.yml
    #Refer belk user guide for guidelines on how to create custom configmap.
    preCreatedConfigmap : ""
    # Delete indices older than 7 days
    action_file_yml: |-
      ---
      actions:
        1:
          action: delete_indices
          description: "Delete indices older than 7 (based on index name)"
          options:
            timeout_override:
            continue_if_exception: False
            disable_action: False
            ignore_empty_list: True
          filters:
          - filtertype: age
            source: name
            direction: older
            timestring: '%Y.%m.%d'
            unit: days
            unit_count: 7
        ##When cbur is enabled for elasticsearch,following section can be uncommented to configure deletion of old snapshots.
        ## Curator cronjob should be scheduled to run after backup cronjob.
        #2:
        #  action: delete_snapshots
        #  description: "Delete snapshot older than 5 days (based on index name)"
        #  options:
        #    repository: es_backup
        #    ignore_empty_list: True
        #  filters:
        #  - filtertype: age
        #    source: name
        #    direction: older
        #    timestring: '%Y.%m.%d'
        #    unit: days
        #    unit_count: 5
    # Having config_yaml WILL override the other config
    config_yml: |-
      ---
      client:
        # communicating elasticsearch via SG certificates
        certificate: '/etc/elasticsearch-curator/certs/root-ca.pem'
        hosts:
        # <es>.<namespace>
        - elasticsearch
        http_auth: 'admin:admin'
        master_only: 'false'
        port: 9200
        # ssl_no_validate property should be 'false' when you are using SG
        ssl_no_validate: 'true'
        timeout: '60'
        url_prefix: ''
        # use_ssl property should be true when you are using SG.
        use_ssl: 'false'
      logging:
        blacklist:
        - elasticsearch
        - urllib3
        logfile: ''
        logformat: default
        loglevel: INFO

kubectl:
  image:
    repo: tools/kubectl
    tag: v1.14.10-nano

jobResources:
  requests:
    cpu: 200m
    memory: 500Mi
  limits:
    cpu: 1
    memory: 1Gi

# Set to true to enable istio
istio:
 enabled: false
 # Health check port of istio envoy proxy
 envoy_health_chk_port: 15020

searchguard:
 enable: false
 # Create base64 encoding for keystore, keystorepasswd, truststore, truststorepasswd file and provide to below variables.
 # base64 encoding for passwords use below command
 # echo -n <string in double quotes> | base64
 # base64 encoding for files  use below command
 # base64 <filename>  | tr -d '\n'
 base64_ca_certificate: <base64-rootcapem>
